/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _timetable = __webpack_require__(1);

var _main_menu = __webpack_require__(2);

var _main = __webpack_require__(3);

(0, _main_menu.set_handler_main_menu)();
(0, _main.set_handler_main_page_arrow)();
(0, _timetable.set_handler_timetable)();

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
var COUNT_LESSONS_IN_MONTH = 4;

function insert_iframe_youtube(lesson_element) {
  if (lesson_element.getElementsByClassName('media__iframe').length > 0) {
    return false;
  }

  var iframe = document.createElement('iframe');
  iframe.setAttribute('frameborder', '0');
  iframe.classList.add('media__iframe');

  var media = lesson_element.getElementsByClassName('content__media');
  if (media.length !== 1) {
    return false;
  }

  iframe.setAttribute('src', media[0].dataset.url);
  media[0].appendChild(iframe);
}

function hide_lessons_descriptions() {
  var descriptions = document.getElementsByClassName('lesson__description');
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = descriptions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var description = _step.value;

      description.classList.add('lesson__description--hidden');
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator.return) {
        _iterator.return();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }
}

function switch_lesson_description() {
  var description = this.getElementsByClassName('lesson__description');

  if (description[0].classList.contains('lesson__description--hidden') === true) {
    hide_lessons_descriptions();
    description[0].classList.remove('lesson__description--hidden');
    insert_iframe_youtube(this);
  } else {
    hide_lessons_descriptions();
  }
  return false;
}

function disable_buttons(element) {
  var buttons = element.getElementsByClassName('buttons-month__item');
  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    for (var _iterator2 = buttons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      var button = _step2.value;

      button.classList.remove('buttons-month__item--active');
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2.return) {
        _iterator2.return();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }
}

function show_month_lesson(month) {
  var count_lessons_in_month = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : COUNT_LESSONS_IN_MONTH;

  var lessons = document.getElementsByClassName('lessons__item');
  var _iteratorNormalCompletion3 = true;
  var _didIteratorError3 = false;
  var _iteratorError3 = undefined;

  try {
    for (var _iterator3 = lessons[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
      var lesson = _step3.value;

      lesson.classList.add('lessons__item--hidden');
    }
  } catch (err) {
    _didIteratorError3 = true;
    _iteratorError3 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion3 && _iterator3.return) {
        _iterator3.return();
      }
    } finally {
      if (_didIteratorError3) {
        throw _iteratorError3;
      }
    }
  }

  var end_lesson_in_month = count_lessons_in_month * month;
  var begin_lesson_in_month = end_lesson_in_month - count_lessons_in_month;

  if (lessons.length < begin_lesson_in_month) {
    return null;
  }
  if (lessons.length < end_lesson_in_month) {
    end_lesson_in_month = lessons.length;
  }
  for (var i = begin_lesson_in_month; i < end_lesson_in_month; i++) {
    lessons[i].classList.remove('lessons__item--hidden');
  }
}

function switch_month_lesson() {
  disable_buttons(this.parentNode);
  this.classList.add('buttons-month__item--active');

  var _iteratorNormalCompletion4 = true;
  var _didIteratorError4 = false;
  var _iteratorError4 = undefined;

  try {
    for (var _iterator4 = this.classList[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
      var class_name = _step4.value;

      if (class_name.indexOf('month-') === 0) {
        // 'month-'.length === 6
        var month = parseInt(class_name.slice(6), 10);
        show_month_lesson(month);
      }
    }
  } catch (err) {
    _didIteratorError4 = true;
    _iteratorError4 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion4 && _iterator4.return) {
        _iterator4.return();
      }
    } finally {
      if (_didIteratorError4) {
        throw _iteratorError4;
      }
    }
  }
}

var set_handler_timetable = exports.set_handler_timetable = function set_handler_timetable() {
  // Навешиваем хендлеры на нажатие на заголовок урока
  var lesson_titles = document.getElementsByClassName('lesson-tittle__text');
  if (lesson_titles.length > 0) {
    var _iteratorNormalCompletion5 = true;
    var _didIteratorError5 = false;
    var _iteratorError5 = undefined;

    try {
      for (var _iterator5 = lesson_titles[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
        var lesson_title = _step5.value;

        lesson_title.addEventListener('click', switch_lesson_description.bind(lesson_title.parentNode));
      }
    } catch (err) {
      _didIteratorError5 = true;
      _iteratorError5 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion5 && _iterator5.return) {
          _iterator5.return();
        }
      } finally {
        if (_didIteratorError5) {
          throw _iteratorError5;
        }
      }
    }
  }

  // Навешиваем хендлеры на нажатие на кнопки выбора месяца
  var buttons_month = document.getElementsByClassName('buttons-month__item');
  if (buttons_month.length > 0) {
    var _iteratorNormalCompletion6 = true;
    var _didIteratorError6 = false;
    var _iteratorError6 = undefined;

    try {
      for (var _iterator6 = buttons_month[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
        var button_month = _step6.value;

        button_month.addEventListener('click', switch_month_lesson.bind(button_month));
      }
    } catch (err) {
      _didIteratorError6 = true;
      _iteratorError6 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion6 && _iterator6.return) {
          _iterator6.return();
        }
      } finally {
        if (_didIteratorError6) {
          throw _iteratorError6;
        }
      }
    }
  }
};

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
function show_dropdown_menu() {
  var dropdown_menu = this.getElementsByClassName('dropdown-js');
  if (dropdown_menu.length === 0) {
    return null;
  }
  dropdown_menu[0].classList.remove('dropdown-hide');
}

function hide_dropdown_menu() {
  var dropdown_menu = this.getElementsByClassName('dropdown-js');
  if (dropdown_menu.length === 0) {
    return null;
  }
  dropdown_menu[0].classList.add('dropdown-hide');
}

var set_handler_main_menu = exports.set_handler_main_menu = function set_handler_main_menu() {
  // Навешиваем хендлеры на нажатие на заголовок урока
  var dropdown_menus = document.getElementsByClassName('dropdown-js-control');
  if (dropdown_menus.length > 0) {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = dropdown_menus[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var dropdown_menu = _step.value;

        dropdown_menu.addEventListener('mouseover', show_dropdown_menu.bind(dropdown_menu));
        dropdown_menu.addEventListener('mouseout', hide_dropdown_menu.bind(dropdown_menu));
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  }
};

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
function find_first_active_slide(slider_items) {
  // Функция возвращает номер первого активного элемента в слайдере
  // Если нет активных, то возвращает null.
  for (var i = 0; i < slider_items.length; i++) {
    if (slider_items[i].classList.contains('slide_disable') == false) {
      return i;
    }
  }
  return null;
}

function find_last_active_slide(slider_items) {
  // Функция возвращает номер последнего активного элемента в слайдере
  // Если нет активных, то возвращает null.
  for (var i = slider_items.length - 1; i >= 0; i--) {
    if (slider_items[i].classList.contains('slide_disable') == false) {
      return i;
    }
  }
  return null;
}

function prev_slide_handler() {
  // Обработчик нажатие на стрелочку '<'
  var count_active_slide = 10;
  var slider_items = document.getElementsByClassName('swiper_slide');

  var numb_first_active_slide = find_first_active_slide(slider_items);
  var numb_last_active_slide = find_last_active_slide(slider_items);

  if (numb_first_active_slide === -1 && numb_last_active_slide === -1) {
    console.log('Что-то пошло не так! Нет активных элементов.');
    return false;
  }

  if (numb_last_active_slide !== slider_items.length - 1) {
    slider_items[numb_first_active_slide].classList.add('slide_disable');
    slider_items[numb_last_active_slide + 1].classList.remove('slide_disable');
  }
}

function next_slide_handler() {
  // Обработчик нажатие на стрелочку '>'
  var count_active_slide = 10;
  var slider_items = document.getElementsByClassName('swiper_slide');

  var numb_first_active_slide = find_first_active_slide(slider_items);
  var numb_last_active_slide = find_last_active_slide(slider_items);

  if (numb_first_active_slide === -1 && numb_last_active_slide === -1) {
    console.log('Что-то пошло не так! Нет активных элементов.');
    return false;
  }

  if (numb_last_active_slide != 0) {
    slider_items[numb_first_active_slide - 1].classList.remove('slide_disable');
    slider_items[numb_last_active_slide].classList.add('slide_disable');
  }
}

var set_handler_main_page_arrow = exports.set_handler_main_page_arrow = function set_handler_main_page_arrow() {
  // Навешиваем хендлеры на нажатие стрелочек
  var arrow_prev = document.getElementsByClassName('work_arrow_prev');
  if (arrow_prev.length > 0) {
    arrow_prev[0].addEventListener('click', prev_slide_handler);
  }

  var arrow_next = document.getElementsByClassName('work_arrow_next');
  if (arrow_next.length > 0) {
    arrow_next[0].addEventListener('click', next_slide_handler);
  }
};

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzg1ZTMxYWMwODdiNGM5ODYxMGIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy90aW1ldGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW5fbWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJDT1VOVF9MRVNTT05TX0lOX01PTlRIIiwiaW5zZXJ0X2lmcmFtZV95b3V0dWJlIiwibGVzc29uX2VsZW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiaWZyYW1lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwibWVkaWEiLCJkYXRhc2V0IiwidXJsIiwiYXBwZW5kQ2hpbGQiLCJoaWRlX2xlc3NvbnNfZGVzY3JpcHRpb25zIiwiZGVzY3JpcHRpb25zIiwiZGVzY3JpcHRpb24iLCJzd2l0Y2hfbGVzc29uX2Rlc2NyaXB0aW9uIiwiY29udGFpbnMiLCJyZW1vdmUiLCJkaXNhYmxlX2J1dHRvbnMiLCJlbGVtZW50IiwiYnV0dG9ucyIsImJ1dHRvbiIsInNob3dfbW9udGhfbGVzc29uIiwibW9udGgiLCJjb3VudF9sZXNzb25zX2luX21vbnRoIiwibGVzc29ucyIsImxlc3NvbiIsImVuZF9sZXNzb25faW5fbW9udGgiLCJiZWdpbl9sZXNzb25faW5fbW9udGgiLCJpIiwic3dpdGNoX21vbnRoX2xlc3NvbiIsInBhcmVudE5vZGUiLCJjbGFzc19uYW1lIiwiaW5kZXhPZiIsInBhcnNlSW50Iiwic2xpY2UiLCJzZXRfaGFuZGxlcl90aW1ldGFibGUiLCJsZXNzb25fdGl0bGVzIiwibGVzc29uX3RpdGxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJidXR0b25zX21vbnRoIiwiYnV0dG9uX21vbnRoIiwic2hvd19kcm9wZG93bl9tZW51IiwiZHJvcGRvd25fbWVudSIsImhpZGVfZHJvcGRvd25fbWVudSIsInNldF9oYW5kbGVyX21haW5fbWVudSIsImRyb3Bkb3duX21lbnVzIiwiZmluZF9maXJzdF9hY3RpdmVfc2xpZGUiLCJzbGlkZXJfaXRlbXMiLCJmaW5kX2xhc3RfYWN0aXZlX3NsaWRlIiwicHJldl9zbGlkZV9oYW5kbGVyIiwiY291bnRfYWN0aXZlX3NsaWRlIiwibnVtYl9maXJzdF9hY3RpdmVfc2xpZGUiLCJudW1iX2xhc3RfYWN0aXZlX3NsaWRlIiwiY29uc29sZSIsImxvZyIsIm5leHRfc2xpZGVfaGFuZGxlciIsInNldF9oYW5kbGVyX21haW5fcGFnZV9hcnJvdyIsImFycm93X3ByZXYiLCJhcnJvd19uZXh0Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1DQUEyQiwwQkFBMEIsRUFBRTtBQUN2RCx5Q0FBaUMsZUFBZTtBQUNoRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4REFBc0QsK0RBQStEOztBQUVySDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7QUM3REE7O0FBQ0E7O0FBQ0E7O0FBR0E7QUFDQTtBQUNBLHdDOzs7Ozs7Ozs7Ozs7QUNQQSxJQUFNQSx5QkFBeUIsQ0FBL0I7O0FBRUEsU0FBU0MscUJBQVQsQ0FBK0JDLGNBQS9CLEVBQStDO0FBQzdDLE1BQUlBLGVBQWVDLHNCQUFmLENBQXNDLGVBQXRDLEVBQXVEQyxNQUF2RCxHQUFnRSxDQUFwRSxFQUF1RTtBQUNyRSxXQUFPLEtBQVA7QUFDRDs7QUFFRCxNQUFJQyxTQUFTQyxTQUFTQyxhQUFULENBQXVCLFFBQXZCLENB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QUF4QztBQUNEOztBQUVELE1BQUlTLGFBQWF6RCxTQUFTSCxzQkFBVCxDQUFnQyxpQkFBaEMsQ0FBakI7QUFDQSxNQUFJNEQsV0FBVzNELE1BQVgsR0FBb0IsQ0FBeEIsRUFBMkI7QUFDekIyRCxlQUFXLENBQVgsRUFBY3JCLGdCQUFkLENBQStCLE9BQS9CLEVBQXdDa0Isa0JBQXhDO0FBQ0Q7QUFDRixDQVhNLEMiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDc4NWUzMWFjMDg3YjRjOTg2MTBiIiwiaW1wb3J0IHtzZXRfaGFuZGxlcl90aW1ldGFibGV9IGZyb20gJy4vdGltZXRhYmxlJztcbmltcG9ydCB7c2V0X2hhbmRsZXJfbWFpbl9tZW51fSBmcm9tICcuL21haW5fbWVudSc7XG5pbXBvcnQge3NldF9oYW5kbGVyX21haW5fcGFnZV9hcnJvd30gZnJvbSAnLi9tYWluJztcblxuXG5zZXRfaGFuZGxlcl9tYWluX21lbnUoKTtcbnNldF9oYW5kbGVyX21haW5fcGFnZV9hcnJvdygpO1xuc2V0X2hhbmRsZXJfdGltZXRhYmxlKCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJjb25zdCBDT1VOVF9MRVNTT05TX0lOX01PTlRIID0gNFxuXG5mdW5jdGlvbiBpbnNlcnRfaWZyYW1lX3lvdXR1YmUobGVzc29uX2VsZW1lbnQpIHtcbiAgaWYgKGxlc3Nvbl9lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21lZGlhX19pZnJhbWUnKS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICBpZnJhbWUuc2V0QXR0cmlidXRlKCdmcmFtZWJvcmRlcicsICcwJyk7XG4gIGlmcmFtZS5jbGFzc0xpc3QuYWRkKCdtZWRpYV9faWZyYW1lJylcblxuICBsZXQgbWVkaWEgPSBsZXNzb25fZWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb250ZW50X19tZWRpYScpO1xuICBpZiAobWVkaWEubGVuZ3RoICE9PSAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnc3JjJywgbWVkaWFbMF0uZGF0YXNldC51cmwpO1xuICBtZWRpYVswXS5hcHBlbmRDaGlsZChpZnJhbWUpXG59XG5cbmZ1bmN0aW9uIGhpZGVfbGVzc29uc19kZXNjcmlwdGlvbnMoKSB7XG4gIGxldCBkZXNjcmlwdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsZXNzb25fX2Rlc2NyaXB0aW9uJyk7XG4gIGZvciAobGV0IGRlc2NyaXB0aW9uIG9mIGRlc2NyaXB0aW9ucykge1xuICAgIGRlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ2xlc3Nvbl9fZGVzY3JpcHRpb24tLWhpZGRlbicpXG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzd2l0Y2hfbGVzc29uX2Rlc2NyaXB0aW9uICgpIHtcbiAgbGV0IGRlc2NyaXB0aW9uID0gdGhpcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdsZXNzb25fX2Rlc2NyaXB0aW9uJyk7XG5cbiAgaWYgKGRlc2NyaXB0aW9uWzBdLmNsYXNzTGlzdC5jb250YWlucygnbGVzc29uX19kZXNjcmlwdGlvbi0taGlkZGVuJykgPT09IHRydWUpIHtcbiAgICBoaWRlX2xlc3NvbnNfZGVzY3JpcHRpb25zKCk7XG4gICAgZGVzY3JpcHRpb25bMF0uY2xhc3NMaXN0LnJlbW92ZSgnbGVzc29uX19kZXNjcmlwdGlvbi0taGlkZGVuJyk7XG4gICAgaW5zZXJ0X2lmcmFtZV95b3V0dWJlKHRoaXMpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVfbGVzc29uc19kZXNjcmlwdGlvbnMoKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuZnVuY3Rpb24gZGlzYWJsZV9idXR0b25zKGVsZW1lbnQpIHtcbiAgbGV0IGJ1dHRvbnMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J1dHRvbnMtbW9udGhfX2l0ZW0nKTtcbiAgZm9yIChsZXQgYnV0dG9uIG9mIGJ1dHRvbnMpIHtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9ucy1tb250aF9faXRlbS0tYWN0aXZlJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzaG93X21vbnRoX2xlc3Nvbihtb250aCwgY291bnRfbGVzc29uc19pbl9tb250aD1DT1VOVF9MRVNTT05TX0lOX01PTlRIKSB7XG4gIGxldCBsZXNzb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGVzc29uc19faXRlbScpO1xuICBmb3IgKGxldCBsZXNzb24gb2YgbGVzc29ucykge1xuICAgIGxlc3Nvbi5jbGFzc0xpc3QuYWRkKCdsZXNzb25zX19pdGVtLS1oaWRkZW4nKTtcbiAgfVxuICBsZXQgZW5kX2xlc3Nvbl9pbl9tb250aCA9IGNvdW50X2xlc3NvbnNfaW5fbW9udGggKiBtb250aDtcbiAgbGV0IGJlZ2luX2xlc3Nvbl9pbl9tb250aCA9IGVuZF9sZXNzb25faW5fbW9udGggLSBjb3VudF9sZXNzb25zX2luX21vbnRoO1xuXG4gIGlmIChsZXNzb25zLmxlbmd0aCA8IGJlZ2luX2xlc3Nvbl9pbl9tb250aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChsZXNzb25zLmxlbmd0aCA8IGVuZF9sZXNzb25faW5fbW9udGgpIHtcbiAgICBlbmRfbGVzc29uX2luX21vbnRoID0gbGVzc29ucy5sZW5ndGg7XG4gIH1cbiAgZm9yIChsZXQgaSA9IGJlZ2luX2xlc3Nvbl9pbl9tb250aDsgaSA8IGVuZF9sZXNzb25faW5fbW9udGg7IGkrKykge1xuICAgIGxlc3NvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnbGVzc29uc19faXRlbS0taGlkZGVuJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzd2l0Y2hfbW9udGhfbGVzc29uKCkge1xuICBkaXNhYmxlX2J1dHRvbnModGhpcy5wYXJlbnROb2RlKTtcbiAgdGhpcy5jbGFzc0xpc3QuYWRkKCdidXR0b25zLW1vbnRoX19pdGVtLS1hY3RpdmUnKTtcblxuICBmb3IgKGxldCBjbGFzc19uYW1lIG9mIHRoaXMuY2xhc3NMaXN0KSB7XG4gICAgaWYgKGNsYXNzX25hbWUuaW5kZXhPZignbW9udGgtJykgPT09IDApIHtcbiAgICAgIC8vICdtb250aC0nLmxlbmd0aCA9PT0gNlxuICAgICAgbGV0IG1vbnRoID0gcGFyc2VJbnQoY2xhc3NfbmFtZS5zbGljZSg2KSwgMTApXG4gICAgICBzaG93X21vbnRoX2xlc3Nvbihtb250aClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGxldCBzZXRfaGFuZGxlcl90aW1ldGFibGUgPSAoKSA9PiB7XG4gIC8vINCd0LDQstC10YjQuNCy0LDQtdC8INGF0LXQvdC00LvQtdGA0Ysg0L3QsCDQvdCw0LbQsNGC0LjQtSDQvdCwINC30LDQs9C+0LvQvtCy0L7QuiDRg9GA0L7QutCwXG4gIGxldCBsZXNzb25fdGl0bGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGVzc29uLXRpdHRsZV9fdGV4dCcpO1xuICBpZiAobGVzc29uX3RpdGxlcy5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChsZXQgbGVzc29uX3RpdGxlIG9mIGxlc3Nvbl90aXRsZXMpIHtcbiAgICAgIGxlc3Nvbl90aXRsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaF9sZXNzb25fZGVzY3JpcHRpb24uYmluZChsZXNzb25fdGl0bGUucGFyZW50Tm9kZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8vINCd0LDQstC10YjQuNCy0LDQtdC8INGF0LXQvdC00LvQtdGA0Ysg0L3QsCDQvdCw0LbQsNGC0LjQtSDQvdCwINC60L3QvtC/0LrQuCDQstGL0LHQvtGA0LAg0LzQtdGB0Y/RhtCwXG4gIGxldCBidXR0b25zX21vbnRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYnV0dG9ucy1tb250aF9faXRlbScpO1xuICBpZiAoYnV0dG9uc19tb250aC5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChsZXQgYnV0dG9uX21vbnRoIG9mIGJ1dHRvbnNfbW9udGgpIHtcbiAgICAgIGJ1dHRvbl9tb250aC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN3aXRjaF9tb250aF9sZXNzb24uYmluZChidXR0b25fbW9udGgpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90aW1ldGFibGUuanMiLCJmdW5jdGlvbiBzaG93X2Ryb3Bkb3duX21lbnUoKSB7XG4gIGxldCBkcm9wZG93bl9tZW51ID0gdGhpcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkcm9wZG93bi1qcycpO1xuICBpZiAoZHJvcGRvd25fbWVudS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGRyb3Bkb3duX21lbnVbMF0uY2xhc3NMaXN0LnJlbW92ZSgnZHJvcGRvd24taGlkZScpO1xufVxuXG5mdW5jdGlvbiBoaWRlX2Ryb3Bkb3duX21lbnUoKSB7XG4gIGxldCBkcm9wZG93bl9tZW51ID0gdGhpcy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkcm9wZG93bi1qcycpO1xuICBpZiAoZHJvcGRvd25fbWVudS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG4gIGRyb3Bkb3duX21lbnVbMF0uY2xhc3NMaXN0LmFkZCgnZHJvcGRvd24taGlkZScpO1xufVxuXG5leHBvcnQgbGV0IHNldF9oYW5kbGVyX21haW5fbWVudSA9ICgpID0+IHtcbiAgLy8g0J3QsNCy0LXRiNC40LLQsNC10Lwg0YXQtdC90LTQu9C10YDRiyDQvdCwINC90LDQttCw0YLQuNC1INC90LAg0LfQsNCz0L7Qu9C+0LLQvtC6INGD0YDQvtC60LBcbiAgbGV0IGRyb3Bkb3duX21lbnVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZHJvcGRvd24tanMtY29udHJvbCcpO1xuICBpZiAoZHJvcGRvd25fbWVudXMubGVuZ3RoID4gMCkge1xuICAgIGZvciAobGV0IGRyb3Bkb3duX21lbnUgb2YgZHJvcGRvd25fbWVudXMpIHtcbiAgICAgIGRyb3Bkb3duX21lbnUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgc2hvd19kcm9wZG93bl9tZW51LmJpbmQoZHJvcGRvd25fbWVudSkpO1xuICAgICAgZHJvcGRvd25fbWVudS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGhpZGVfZHJvcGRvd25fbWVudS5iaW5kKGRyb3Bkb3duX21lbnUpKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tYWluX21lbnUuanMiLCJmdW5jdGlvbiBmaW5kX2ZpcnN0X2FjdGl2ZV9zbGlkZShzbGlkZXJfaXRlbXMpIHtcbiAgLy8g0KTRg9C90LrRhtC40Y8g0LLQvtC30LLRgNCw0YnQsNC10YIg0L3QvtC80LXRgCDQv9C10YDQstC+0LPQviDQsNC60YLQuNCy0L3QvtCz0L4g0Y3Qu9C10LzQtdC90YLQsCDQsiDRgdC70LDQudC00LXRgNC1XG4gIC8vINCV0YHQu9C4INC90LXRgiDQsNC60YLQuNCy0L3Ri9GFLCDRgtC+INCy0L7Qt9Cy0YDQsNGJ0LDQtdGCIG51bGwuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpZGVyX2l0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHNsaWRlcl9pdGVtc1tpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlX2Rpc2FibGUnKSA9PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbmZ1bmN0aW9uIGZpbmRfbGFzdF9hY3RpdmVfc2xpZGUoc2xpZGVyX2l0ZW1zKSB7XG4gIC8vINCk0YPQvdC60YbQuNGPINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC90L7QvNC10YAg0L/QvtGB0LvQtdC00L3QtdCz0L4g0LDQutGC0LjQstC90L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0LIg0YHQu9Cw0LnQtNC10YDQtVxuICAvLyDQldGB0LvQuCDQvdC10YIg0LDQutGC0LjQstC90YvRhSwg0YLQviDQstC+0LfQstGA0LDRidCw0LXRgiBudWxsLlxuICBmb3IgKGxldCBpID0gKHNsaWRlcl9pdGVtcy5sZW5ndGggLSAxKTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoc2xpZGVyX2l0ZW1zW2ldLmNsYXNzTGlzdC5jb250YWlucygnc2xpZGVfZGlzYWJsZScpID09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuZnVuY3Rpb24gcHJldl9zbGlkZV9oYW5kbGVyKCkge1xuICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQvdCw0LbQsNGC0LjQtSDQvdCwINGB0YLRgNC10LvQvtGH0LrRgyAnPCdcbiAgbGV0IGNvdW50X2FjdGl2ZV9zbGlkZSA9IDEwO1xuICBsZXQgc2xpZGVyX2l0ZW1zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc3dpcGVyX3NsaWRlJyk7XG5cbiAgbGV0IG51bWJfZmlyc3RfYWN0aXZlX3NsaWRlID0gZmluZF9maXJzdF9hY3RpdmVfc2xpZGUoc2xpZGVyX2l0ZW1zKVxuICBsZXQgbnVtYl9sYXN0X2FjdGl2ZV9zbGlkZSA9IGZpbmRfbGFzdF9hY3RpdmVfc2xpZGUoc2xpZGVyX2l0ZW1zKVxuXG4gIGlmICgobnVtYl9maXJzdF9hY3RpdmVfc2xpZGUgPT09IC0xKSAmJiAobnVtYl9sYXN0X2FjdGl2ZV9zbGlkZSA9PT0gLTEpKSB7XG4gICAgY29uc29sZS5sb2coJ9Cn0YLQvi3RgtC+INC/0L7RiNC70L4g0L3QtSDRgtCw0LohINCd0LXRgiDQsNC60YLQuNCy0L3Ri9GFINGN0LvQtdC80LXQvdGC0L7Qsi4nKTtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChudW1iX2xhc3RfYWN0aXZlX3NsaWRlICE9PSBzbGlkZXJfaXRlbXMubGVuZ3RoLTEpIHtcbiAgICBzbGlkZXJfaXRlbXNbKG51bWJfZmlyc3RfYWN0aXZlX3NsaWRlKV0uY2xhc3NMaXN0LmFkZCgnc2xpZGVfZGlzYWJsZScpXG4gICAgc2xpZGVyX2l0ZW1zWyhudW1iX2xhc3RfYWN0aXZlX3NsaWRlKzEpXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZV9kaXNhYmxlJylcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIG5leHRfc2xpZGVfaGFuZGxlcigpIHtcbiAgLy8g0J7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40LUg0L3QsCDRgdGC0YDQtdC70L7Rh9C60YMgJz4nXG4gIGxldCBjb3VudF9hY3RpdmVfc2xpZGUgPSAxMDtcbiAgbGV0IHNsaWRlcl9pdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N3aXBlcl9zbGlkZScpO1xuXG4gIGxldCBudW1iX2ZpcnN0X2FjdGl2ZV9zbGlkZSA9IGZpbmRfZmlyc3RfYWN0aXZlX3NsaWRlKHNsaWRlcl9pdGVtcylcbiAgbGV0IG51bWJfbGFzdF9hY3RpdmVfc2xpZGUgPSBmaW5kX2xhc3RfYWN0aXZlX3NsaWRlKHNsaWRlcl9pdGVtcylcblxuICBpZiAoKG51bWJfZmlyc3RfYWN0aXZlX3NsaWRlID09PSAtMSkgJiYgKG51bWJfbGFzdF9hY3RpdmVfc2xpZGUgPT09IC0xKSkge1xuICAgIGNvbnNvbGUubG9nKCfQp9GC0L4t0YLQviDQv9C+0YjQu9C+INC90LUg0YLQsNC6ISDQndC10YIg0LDQutGC0LjQstC90YvRhSDRjdC70LXQvNC10L3RgtC+0LIuJyk7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAobnVtYl9sYXN0X2FjdGl2ZV9zbGlkZSAhPSAwKSB7XG4gICAgc2xpZGVyX2l0ZW1zWyhudW1iX2ZpcnN0X2FjdGl2ZV9zbGlkZS0xKV0uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVfZGlzYWJsZScpXG4gICAgc2xpZGVyX2l0ZW1zWyhudW1iX2xhc3RfYWN0aXZlX3NsaWRlKV0uY2xhc3NMaXN0LmFkZCgnc2xpZGVfZGlzYWJsZScpXG4gIH1cbn1cblxuXG5leHBvcnQgbGV0IHNldF9oYW5kbGVyX21haW5fcGFnZV9hcnJvdyA9ICgpID0+IHtcbiAgLy8g0J3QsNCy0LXRiNC40LLQsNC10Lwg0YXQtdC90LTQu9C10YDRiyDQvdCwINC90LDQttCw0YLQuNC1INGB0YLRgNC10LvQvtGH0LXQulxuICBsZXQgYXJyb3dfcHJldiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dvcmtfYXJyb3dfcHJldicpO1xuICBpZiAoYXJyb3dfcHJldi5sZW5ndGggPiAwKSB7XG4gICAgYXJyb3dfcHJldlswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHByZXZfc2xpZGVfaGFuZGxlcik7XG4gIH1cblxuICBsZXQgYXJyb3dfbmV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dvcmtfYXJyb3dfbmV4dCcpO1xuICBpZiAoYXJyb3dfbmV4dC5sZW5ndGggPiAwKSB7XG4gICAgYXJyb3dfbmV4dFswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5leHRfc2xpZGVfaGFuZGxlcik7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9tYWluLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==